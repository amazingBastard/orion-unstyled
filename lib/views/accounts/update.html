<template name="orionAccountsUpdate">
  {{# Layout template="orionSmallContentOffset" }}
    {{# Layout template="orionTitle" }}
      {{ i18n 'accounts.update.title' }}
    {{/ Layout }}

    {{# autoForm id="accountsUpdateEmailsForm" schema=emailsSchema type="method-update" doc=user meteormethod="orionAccountsUpdateEmails" }}
      {{> afQuickField name='emails' }}

      <div class="orion actions">
        <button class="orion primary button">{{ i18n 'global.save' }}</button>
      </div>
    {{/ autoForm }}

    <h2 class="orion title">{{ i18n 'accounts.update.sections.profile.title' }}</h2>

    <div class="orion segment">
      {{# autoForm id="accountsUpdateProfileForm" schema=profileSchema type="method-update" doc=user meteormethod="orionAccountsUpdateProfile" }}
        {{> afQuickFields name='profile' }}

        <div class="orion actions">
          <button class="orion primary button">{{ i18n 'global.save' }}</button>
        </div>
      {{/ autoForm }}
    </div>

    <h2 class="orion title">{{ i18n 'accounts.update.sections.roles.title' }}</h2>

    <div class="orion segment">
      <form class="orion roles form">
        <label class="orion label">{{ i18n 'accounts.update.sections.roles.selectRoles' }}</label>
        {{# each roles }}
          <div class="orion checkbox">
            <label class="orion label">
              {{# if hasRole this }}
                <input type="checkbox" class="orion input" role="{{ this }}" checked><code>{{ this }}</code>
              {{ else }}
                <input type="checkbox" class="orion input" role="{{ this }}"> <code>{{ this }}</code>
              {{/ if }}
            </label>
          </div>
        {{/ each }}

        <div class="orion actions">
          <button class="orion primary button btn-save">{{ i18n 'global.save' }}</button>
        </div>
      </form>
    </div>

    <h2 class="orion title">{{ i18n 'accounts.update.sections.changePassword.title' }}</h2>

    <div class="orion segment">
      {{# autoForm id="accountsUpdatePasswordForm" schema=passwordSchema type="method-update" doc=user meteormethod="orionAccountsUpdatePassword" }}
        {{> afQuickField name='password' }}
        {{> afQuickField name='confirm' }}

        <div class="orion actions">
          <button class="orion primary button">{{ i18n 'global.save' }}</button>
        </div>
      {{/ autoForm }}
    </div>

    <h2 class="orion title">{{ i18n 'accounts.update.sections.deleteUser.title' }}</h2>

    <div class="orion segment">
      <p class="orion negative message">
        {{ i18n 'accounts.update.sections.deleteUser.advice' }}
      </p>

      <div class="orion actions">
        {{# if confirmDelete }}
          <button id="btnConfirmDeleteUser" class="orion negative button" user="{{user._id}}">
            {{ i18n 'global.confirm' }}
          </button>
        {{ else }}
          <button id="btnDeleteUser" class="orion negative button">
            {{ i18n 'accounts.update.sections.deleteUser.button' }}
          </button>
        {{/ if }}
      </div>
    </div>

    <br>
    <br>
    <br>

  {{/ Layout }}
</template>
